<!DOCTYPE html>
<html lang="en">
<script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js">
</script>
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS180 Final Project</title>
</head>
<body>
    <h1>Maochuan Lu - Project 1 Gradient Domain Fusion</h1>

    <h2 style="font-size: 30px;">Overview</h2>
    <p style="font-size: 20px;">
        In this project, we are going to implement Poisson Blending and Mixed Gradient in Bells & Whistles to seamlessly blend an object or texture from a source image into a target image.
    </p>

    <h2 style="font-size: 30px;">Part 1 Toy Problem</h2>
    <p style="font-size: 20px;">
      In this part, I reconstruct a toy image from its gradients by solving a sparse linear system using least squares. 
      The process is same as the implementation details: I firstly try to map each pixel to a variable index and then I define a sparse matrix <code>A</code> and  
        <code>b</code>, which represent the x-gradients and y-gradients of the image. Additionally, I add a constriant for the top-left pixel to anchor the 
        reconstruction. The system <code>Av = b</code> is then solved using the <code>lsqr</code> method, and 
        the solution <code>v</code>. Here is my result: 
    </p>
    <img src="./final_project/gradient_domain/part1.png" width="600" alt="part1.png"> <br/>

<h2 style="font-size: 30px;">Part 2 Poisson Blending</h2>
<p>
    In this part, I implement Poisson blending, which is a wonderful technique that merges an object image
    into a background image seamlessly through gradient tricks. 
<p>The minimization problem can be expressed as:</p>
    <div style="text-align: center;">
        \[
        \mathbf{v} = \arg\min_{\mathbf{v}} 
        \sum_{i \in S, j \in N_i \cap S} 
        ((v_i - v_j) - (s_i - s_j))^2 
        + 
        \sum_{i \in S, j \in N_i \cap \neg S} 
        ((v_i - t_j) - (s_i - s_j))^2
        \]
    </div>

<p> 
    I first make sure that each pixel in the mask is mapped to a variable, and neighborhoods are in a 
    sparse matrix <code>A</code> and vector <code>b</code>. For each pixel 
    in the mask, gradient constraints are enforced: if a neighbor lies within the mask, the gradient 
    from the object image is preserved. If a neighbor lies outside the mask, the gradient aligns with the 
    background image. This gives a sparse linear system <code>Av = b</code> 
    using <code>lsqr</code>. Then I update or copy all pixles in the blended region, so that I can seamlessly 
    blend the object into the background to produce the good output image.
</p>

<div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
    <div style="text-align: center;">
        <img src="./final_project/gradient_domain/part2.1_penguin.jpeg" width="250" alt="Object Image">
        <p style="font-size: 18px;">Object Image</p>
    </div>
    <div style="text-align: center;">
        <img src="./final_project/gradient_domain/part2.1_snow.jpg" width="400" alt="Background Image">
        <p style="font-size: 18px;">Background Image</p>
    </div>
    <div style="text-align: center;">
        <img src="./final_project/gradient_domain/part2.1.png" width="400" alt="Blended Image">
        <p style="font-size: 18px;">Blended Image</p>
    </div>
</div>

<div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
    <div style="text-align: center;">
        <img src="./final_project/gradient_domain/part2.2_plane.jpg" width="400" alt="Object Image">
        <p style="font-size: 18px;">Object Image</p>
    </div>
    <div style="text-align: center;">
        <img src="./final_project/gradient_domain/part2.2_2.4_sky.jpg" width="400" alt="Background Image">
        <p style="font-size: 18px;">Background Image</p>
    </div>
    <div style="text-align: center;">
        <img src="./final_project/gradient_domain/part2.2.png" width="400" alt="Blended Image">
        <p style="font-size: 18px;">Blended Image</p>
    </div>
</div>

<div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
    <div style="text-align: center;">
        <img src="./final_project/gradient_domain/part2.3_2.4_moon.jpeg" width="400" alt="Object Image">
        <p style="font-size: 18px;">Object Image</p>
    </div>
    <div style="text-align: center;">
        <img src="./final_project/gradient_domain/part2.3_night_sky.jpeg" width="400" alt="Background Image">
        <p style="font-size: 18px;">Background Image</p>
    </div>
    <div style="text-align: center;">
        <img src="./final_project/gradient_domain/part2.3.png" width="400" alt="Blended Image">
        <p style="font-size: 18px;">Blended Image</p>
    </div>
</div>

<div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
    <div style="text-align: center;">
        <img src="./final_project/gradient_domain/part2.3_2.4_moon.jpeg" width="400" alt="Object Image">
        <p style="font-size: 18px;">Object Image</p>
    </div>
    <div style="text-align: center;">
        <img src="./final_project/gradient_domain/part2.2_2.4_sky.jpg" width="400" alt="Background Image">
        <p style="font-size: 18px;">Background Image</p>
    </div>
    <div style="text-align: center;">
        <img src="./final_project/gradient_domain/part2.4.png" width="400" alt="Blended Image">
        <p style="font-size: 18px;">Blended Image</p>
    </div>
</div>
<p>Note this image does not blend really well because the dark black sky around the moon doesnâ€™t match the bright blue sky of the background, making it hard to smoothly merge the colors </p>


    








    
    <h2 style="font-size: 30px;">Project 2 Poor Man's Augmented Reality</h2>
    <p style="font-size: 20px;">
        In Part 2, I created a GIF morph sequence with 45 frames, each with a duration of 30 ms. Since the GIF file was too large to upload to GitHub, I converted it into a YouTube video. You can watch it directly below:
    </p>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/ZCOOzz04D_g" 
        title="YouTube video player" frameborder="0" 
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
        allowfullscreen></iframe>

</body>
</html>
